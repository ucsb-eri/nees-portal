{"ts":1351735271213,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/* vim: set tabstop=4 shiftwidth=4: */\n/*jshint mootools:true */\n\n/**\n * Handles data retrieval and storage.\n * \n * -----------------------------------------------------------------------------\n * Layout\n * -----------------------------------------------------------------------------\n * Model\n *  - initialize()\n *  - sendRequest(type, opts, callback, bind)\n * \n *     Channels\n *      - initialize()\n *      - processChannels()\n *      - update(evid)\n *     Data\n *      - getValues()\n *      - setValues(opts)\n *      - sortBy(col)\n *      - update(obj)\n *     Events\n *      - getEvents()\n *      - getSiteId()\n *      - processEvents(json)\n *      - update(obj)\n */\n(function (global) {\n    'use strict';\n    \n\tvar Model = global.Model = (function () {\n\t\tvar settings = {\n\t\t\trequestUrl: 'get.php'\n\t\t};\n\n\t\treturn {\n\t\t\tinitialize:\t\tfunction () {\n            // Initialize child objects\n                this.Channels = new Channels();\n                this.Data = new Data();\n                this.Events = new Events();\n            },\n            /**\n             * Handle AJAX requests\n             */\n\t\t\tsendRequest:\tfunction (type, opts, callback, bind) {\n\t\t\t\tvar queryString = '';\n\t\t\t\t\n\t\t\t\tfor (var k in opts) {\n\t\t\t\t\tif (opts[k] && opts.hasOwnProperty(k)) {\n\t\t\t\t\t\tqueryString += k + '=' + opts[k] + '&';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tqueryString += 'type=' + type;\n\n\t\t\t\tnew Request.JSON({\n\t\t\t\t\tonSuccess: bind ? callback.bind(bind) : callback,\n\t\t\t\t\turl: settings.requestUrl\n\t\t\t\t}).post(queryString);\n\t\t\t}\n\t\t};\n\t}) ();\n\n    var Channels = (function () {\n        var\n            $super = Model,\n            data = {\n                channels: null,\n                evid: -1\n            },\n            queryResult = 'channel-results';\n\n        return new Class({\n            Extends: global.Observable,\n            initialize: function () {},\n            getChannels: function () {\n                return data.channels;\n            },\n            processChannels: function (json) {\n\t\t\t\tdata.channels = json;\n                \n//\t\t\t\t$(queryResult).set('text', 'Found ' + json.$meta.rows +\n//                    ' results.');\n\n\t\t\t\tthis.notify();\n            },\n            update: function (evid, siteId) {\n                $super.sendRequest('chn', {\n                    evid: evid,\n                    siteId: siteId\n                }, this.processChannels, this);\n            }\n        });\n    }) ();\n\n\tvar Data = (function () {\n\t\tvar\n\t\t\tvalues\t=\t{};\n\n\t\treturn new Class({\n            Extends: global.Observable,\n\t\t\tgetValues: function () {\n\t\t\t\treturn values;\n\t\t\t},\n\t\t\tsetValues: function (opts) {\n\t\t\t\t// Gather site details\n\t\t\t\tvar selOption\t=\topts.site.options[opts.site.selectedIndex];\n\t\t\t\tvalues.site\t\t=\t{\n\t\t\t\t\tname: opts.site.value,\n\t\t\t\t\tlat: parseFloat(selOption.getAttribute('lat')),\n\t\t\t\t\tlon: parseFloat(selOption.getAttribute('lon')),\n\n\t\t\t\t\ttoString: function () {\n\t\t\t\t\t\treturn this.name;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Set default if no value availible\n\t\t\t\tvalues.maxMag =\topts.maxMag ? opts.maxMag : 9;\n\t\t\t\tvalues.minMag = opts.minMag ? opts.minMag : 0;\n\t\t\t\tvalues.radius = opts.radius ? opts.radius : 0;\n\n\t\t\t\t// Set if availible\n\t\t\t\topts.eDate  &&  (values.eDate = opts.eDate);\n\t\t\t\topts.sDate  &&  (values.sDate = opts.sDate);\n\n\t\t\t\tvalues.page\t\t\t=\topts.page;\n\t\t\t\tvalues.itemsPerPage\t=\topts.itemsPerPage;\n\n\t\t\t\tthis.notify();\n\t\t\t},\n\t\t\tsortBy: function (col) {\n\t\t\t\tif (values.sortBy === col) { // Toggle asc/desc if same sortCol\n\t\t\t\t\tvalues.desc = (values.desc + 1) % 2;\n\t\t\t\t} else {\n\t\t\t\t\tvalues.sortBy = col;\n\t\t\t\t\tvalues.desc = 0;\n\t\t\t\t}\n                \n\t\t\t\tvalues.page = 0;\n\t\t\t\tthis.notify();\n\t\t\t},\n\t\t\t// Receives from: Controller\n\t\t\tupdate: function (obj) {\n\t\t\t\tthis.setValues(obj.getInput());\n\t\t\t}\n\t\t});\n\t}) ();\n\n\tvar Events = (function () {\n\t\tvar\n\t\t\t$super\t\t=\tModel,\n\t\t\tevents\t\t=\t[],\n            meta        =   {},\n\t\t\tqueryResult\t=\t'query-result';\n\n\t\treturn new Class({\n            Extends: global.Observable,\n\t\t\tgetEvents: function () {\n\t\t\t\treturn events;\n\t\t\t},\n            getSiteId: function () {\n                return meta.siteId;\n            },\n\t\t\tprocessEvents: function (json) {\n\t\t\t\tevents  =   json.$data;\n                meta    =   json.$meta;\n\t\t\t\tglobal.Controller.TableCtrls.setMaxPages(json.$meta.totalPages);\n\t\t\t\t$(queryResult).set('text', 'Found ' + json.$meta.rows +\n                    ' results.');\n\n\t\t\t\tthis.notify();\n\t\t\t},\n\t\t\tupdate: function (obj) {\n\t\t\t\t$super.sendRequest('evt', obj.getValues(),\n                    this.processEvents, this);\n\t\t\t}\n\t\t});\n\t}) ();\n\n}) (this);\n"]],"start1":0,"start2":0,"length1":0,"length2":4491}]],"length":4491}
{"contributors":[],"silentsave":false,"ts":1351735299948,"patch":[[{"diffs":[[0,"s({\n"],[-1,"            Extends: global.Observable,\n"],[0,"    "]],"start1":1748,"start2":1748,"length1":48,"length2":8},{"diffs":[[0,"s({\n"],[-1,"            Extends: global.Observable,\n"],[0,"\t\t\tg"]],"start1":2417,"start2":2417,"length1":48,"length2":8},{"diffs":[[0,"s({\n"],[-1,"            Extends: global.Observable,\n"],[0,"\t\t\tg"]],"start1":3780,"start2":3780,"length1":48,"length2":8}]],"length":4371,"saved":false}
{"ts":1351751280893,"patch":[[{"diffs":[[0,"rue */\n\n"],[1,"var Model = new Class({\n    _attrs: {},\n    \n    \n});\n\nvar Collection = new Class({\n    init: function (settings) {\n    }\n});\n"],[0,"/**\n * H"]],"start1":58,"start2":58,"length1":16,"length2":142}]],"length":4497,"saved":false}
{"ts":1351751589957,"patch":[[{"diffs":[[0,"    "],[-1,"init: function (settings) {"],[1,"Implements: Options,\n    options: {},\n    init: function (options) {\n        this.setOptions(options);"],[0,"\n   "]],"start1":150,"start2":150,"length1":35,"length2":110}]],"length":4572,"saved":false}
{"ts":1351751770911,"patch":[[{"diffs":[[0,"    "],[-1,"_attrs: {},\n    \n    "],[1,"Implements: Options,\n    options: {},\n    init: function () {\n    },\n    get: function (key) {\n        return this.options[key];\n    },\n    set: function (key, value) {\n        this.options[key] = value;\n        return this;\n    }"],[0,"\n});"]],"start1":90,"start2":90,"length1":29,"length2":238},{"diffs":[[0,"his."],[-1,"setOptions(options"],[1,"_models = [];\n        this.setOptions(options);\n    },\n    create: function (model) {\n        this._models.push(model"],[0,");\n "]],"start1":441,"start2":441,"length1":26,"length2":125}]],"length":4880,"saved":false}
{"ts":1351751897001,"patch":[[{"diffs":[[0,": function ("],[-1,") {"],[1,"values) {\n        this._values = values;"],[0,"\n    },\n    "]],"start1":140,"start2":140,"length1":27,"length2":64},{"diffs":[[0,"return this."],[-1,"option"],[1,"_value"],[0,"s[key];\n    "]],"start1":234,"start2":234,"length1":30,"length2":30},{"diffs":[[0,"   this."],[-1,"option"],[1,"_value"],[0,"s[key] ="]],"start1":305,"start2":305,"length1":22,"length2":22}]],"length":4917,"saved":false}
{"ts":1351752155883,"patch":[[{"diffs":[[0,"true */\n"],[-1,"\n"],[1,"var app = app || {};\n\n(function () {\n    "],[0,"var Mode"]],"start1":57,"start2":57,"length1":17,"length2":57},{"diffs":[[0,"l = new Class({\n"],[1,"    "],[0,"    Implements: "]],"start1":114,"start2":114,"length1":32,"length2":36},{"diffs":[[0,"ments: Options,\n"],[1,"    "],[0,"    options: {},"]],"start1":143,"start2":143,"length1":32,"length2":36},{"diffs":[[0,"   options: {},\n"],[1,"        \n    "],[0,"    init: functi"]],"start1":164,"start2":164,"length1":32,"length2":45},{"diffs":[[0,"lues) {\n        "],[1,"  "],[1,"  "],[0,"this._values = v"]],"start1":215,"start2":215,"length1":32,"length2":36},{"diffs":[[0,"values;\n"],[1,"    "],[0,"    },\n "]],"start1":250,"start2":250,"length1":16,"length2":20},{"diffs":[[0," },\n    "],[1,"  "],[1,"  "],[0,"get: fun"]],"start1":265,"start2":265,"length1":16,"length2":20},{"diffs":[[0,"ion (key) {\n"],[1,"    "],[0,"        retu"]],"start1":287,"start2":287,"length1":24,"length2":28},{"diffs":[[0,"s[key];\n    "],[1,"  "],[1,"  "],[0,"},\n"],[1,"    "],[0,"    set: fun"]],"start1":329,"start2":329,"length1":27,"length2":35},{"diffs":[[0,"alue) {\n        "],[1,"  "],[1,"  "],[0,"this._values[key"]],"start1":377,"start2":377,"length1":32,"length2":36},{"diffs":[[0," value;\n        "],[1,"    "],[0,"return this;\n   "]],"start1":416,"start2":416,"length1":32,"length2":36},{"diffs":[[0,"    "],[1," "],[-1,"}\n});\n\n"],[1,"   }\n    });\n    \n    "],[0,"var "]],"start1":449,"start2":449,"length1":15,"length2":31},{"diffs":[[0,"Class({\n    "],[1," "],[1,"   "],[0,"Implements: "]],"start1":497,"start2":497,"length1":24,"length2":28},{"diffs":[[0,"s: Options,\n"],[1,"    "],[0,"    options:"]],"start1":522,"start2":522,"length1":24,"length2":28},{"diffs":[[0,"ptions: {},\n"],[1,"        \n    "],[0,"    init: fu"]],"start1":543,"start2":543,"length1":24,"length2":37},{"diffs":[[0,"ions) {\n        "],[1,"   "],[1," "],[0,"this._models = ["]],"start1":591,"start2":591,"length1":32,"length2":36},{"diffs":[[0,"s = [];\n"],[1,"    "],[0,"        "]],"start1":622,"start2":622,"length1":16,"length2":20},{"diffs":[[0,"tions);\n    "],[1,"   "],[1," "],[0,"},\n"],[1,"        _objToStr: function (obj) {\n            var values = [];\n            \n            for (key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    values.push(key + '=' + obj[key]);\n                }\n            }\n            return values.join('&');\n        },\n    "],[0,"    create: "]],"start1":660,"start2":660,"length1":27,"length2":326},{"diffs":[[0,"odel) {\n        "],[1," "],[1,"   "],[0,"this._models.pus"]],"start1":997,"start2":997,"length1":32,"length2":36},{"diffs":[[0,"    "],[-1,"}\n});"],[1,"    },\n        fetch: function (obj) {\n        }\n    });\n}) ();\n"],[0,"\n/**"]],"start1":1043,"start2":1043,"length1":13,"length2":72}]],"length":5417,"saved":false}
{"ts":1351752170793,"patch":[[{"diffs":[[0,"   for ("],[1,"var "],[0,"key in o"]],"start1":766,"start2":766,"length1":16,"length2":20}]],"length":5421,"saved":false}
{"ts":1351752248660,"patch":[[{"diffs":[[0,"h: function (obj"],[-1,") {"],[1,", callback) {\n            var queryString = this._objToStr(obj);\n\t\t\tnew Request.JSON({\n\t\t\t\tonSuccess: callback,\n\t\t\t\turl: app.settings.requestUrl\n\t\t\t}).post(queryString);"],[0,"\n        }\n    }"]],"start1":1070,"start2":1070,"length1":35,"length2":201},{"diffs":[[0,"e;\n\n"],[-1,"\t\t\t\tnew Request.JSON({\n\t\t\t\t\tonSuccess: bind ? callback.bind(bind) : callback,\n\t\t\t\t\turl: settings.requestUrl\n\t\t\t\t}).post(queryString);\n"],[0,"\t\t\t}"]],"start1":2571,"start2":2571,"length1":142,"length2":8}]],"length":5453,"saved":false}
{"ts":1351752271917,"patch":[[{"diffs":[[0,"rl: "],[-1,"app.settings.requestUrl\n\t\t\t"],[1,"options.url\n            "],[0,"}).p"]],"start1":1203,"start2":1203,"length1":35,"length2":32}]],"length":5450,"saved":false}
{"ts":1351752276475,"patch":[[{"diffs":[[0,"r(obj);\n"],[1,"            \n"],[0,"\t\t\tnew R"]],"start1":1143,"start2":1143,"length1":16,"length2":29}]],"length":5463,"saved":false}
{"ts":1351752289513,"patch":[[{"diffs":[[0,"    \n\t\t\t"],[1,"return "],[0,"new Requ"]],"start1":1159,"start2":1159,"length1":16,"length2":23},{"diffs":[[0,"\t\t\turl: "],[1,"this."],[0,"options."]],"start1":1219,"start2":1219,"length1":16,"length2":21}]],"length":5475,"saved":false}
{"ts":1351752294072,"patch":[[{"diffs":[[0,"    \n\t\t\t"],[-1,"return "],[0,"new Requ"]],"start1":1159,"start2":1159,"length1":23,"length2":16}]],"length":5468,"saved":false}
{"ts":1351752383892,"patch":[[{"diffs":[[0,"&');\n        },\n"],[1,"        _processData: function (json) {\n            \n        },\n"],[0,"        create: "]],"start1":958,"start2":958,"length1":32,"length2":96},{"diffs":[[0,"n (model) {\n"],[-1,""],[0,"            "]],"start1":1061,"start2":1061,"length1":24,"length2":24},{"diffs":[[0,"ion (obj"],[-1,", callback"],[0,") {\n    "]],"start1":1142,"start2":1142,"length1":26,"length2":16},{"diffs":[[0,"uccess: "],[-1,"callback"],[1,"this._processData"],[0,",\n\t\t\t\tur"]],"start1":1247,"start2":1247,"length1":24,"length2":33}]],"length":5531,"saved":false}
{"ts":1351752582526,"patch":[[{"diffs":[[0,") {\n            "],[1,"if (json._data) {\n                this._models = json._data;\n            }"],[0,"\n        },\n    "]],"start1":1010,"start2":1010,"length1":32,"length2":106}]],"length":5605,"saved":false}
{"ts":1351752656919,"patch":[[{"diffs":[[0,";\n            }\n"],[1,"            if (this.options.changed) {\n                this.options.changed(this._models);\n            }\n"],[0,"        },\n     "]],"start1":1085,"start2":1085,"length1":32,"length2":138}]],"length":5711,"saved":false}
{"ts":1351752693792,"patch":[[{"diffs":[[0,") {\n"],[-1,"    var Model = new Class({\n        Implements: Options,\n        options: {},\n        \n        init: function (values) {\n            this._values = values;\n        },\n        get: function (key) {\n            return this._values[key];\n        },\n        set: function (key, value) {\n            this._values[key] = value;\n            return this;\n        }\n    });\n    \n"],[0,"    "]],"start1":98,"start2":98,"length1":378,"length2":8}]],"length":5341,"saved":false}
{"ts":1351752826516,"patch":[[{"diffs":[[0,"    });\n"],[1,"    \n    var Events = new Collection({\n        changed: function () {\n            PubSub.publish('eventsUpdated');\n        },\n        url: 'events.php'\n    });\n"],[0,"}) ();\n\n"]],"start1":1154,"start2":1154,"length1":16,"length2":176}]],"length":5501,"saved":false}
{"ts":1351752903647,"patch":[[{"diffs":[[0,"   });\n    \n"],[1,"    app.Models = {};\n    \n"],[0,"    var Even"]],"start1":1155,"start2":1155,"length1":24,"length2":50},{"diffs":[[0,"    });\n"],[1,"    app.Models.Events = Events;\n    \n    var Channels = new Collection({\n        changed: function () {\n            PubSub.publish('channelsUpdated');\n        },\n        url: 'channels.php'\n    });\n    app.Models.Events = Events;\n"],[0,"}) ();\n\n"]],"start1":1340,"start2":1340,"length1":16,"length2":246}]],"length":5757,"saved":false}
{"ts":1351752952381,"patch":[[{"diffs":[[0," = {};\n    \n"],[1,"    var Sites = new Collection({\n        changed: function () {\n            PubSub.publish('eventsUpdated');\n        },\n        url: 'sites.php'\n    });\n    app.Models.Events = Events;\n    \n"],[0,"    var Even"]],"start1":1181,"start2":1181,"length1":24,"length2":214}]],"length":5947,"saved":false}
{"ts":1351752964780,"patch":[[{"diffs":[[0," app.Models."],[-1,"Events = Event"],[1,"Sites = Site"],[0,"s;\n    \n    "]],"start1":1349,"start2":1349,"length1":38,"length2":36}]],"length":5945,"saved":false}
{"ts":1351753004221,"patch":[[{"diffs":[[0,"    var "],[1,"Collection, Sites, Events, Channels;\n    \n    "],[0,"Collecti"]],"start1":102,"start2":102,"length1":16,"length2":62},{"diffs":[[0,"   \n    "],[-1,"var "],[0,"Sites = "]],"start1":1235,"start2":1235,"length1":20,"length2":16},{"diffs":[[0,"ew Collection({\n"],[1,""],[0,"        changed:"]],"start1":1252,"start2":1252,"length1":32,"length2":32},{"diffs":[[0,"   \n    "],[-1,"var "],[0,"Events ="]],"start1":1419,"start2":1419,"length1":20,"length2":16},{"diffs":[[0,"s;\n    \n"],[1,""],[0,"    "],[-1,"var "],[0,"Channels"]],"start1":1603,"start2":1603,"length1":24,"length2":20}]],"length":5979,"saved":false}
{"ts":1351753042759,"patch":[[{"diffs":[[0,"tring);\n"],[1,"        },\n        toArray: function () {\n            return this._models;\n"],[0,"        "]],"start1":1182,"start2":1182,"length1":16,"length2":91}]],"length":6054,"saved":false}
{"ts":1351753087360,"patch":[[{"diffs":[[0,"nnels;\n    \n"],[1,"    // Initialize app.Models namespace\n    app.Models = {};\n    \n    // Collection Class holds data models\n"],[0,"    Collecti"]],"start1":140,"start2":140,"length1":24,"length2":131},{"diffs":[[0,"   \n"],[-1,"    app.Models = {};\n    \n"],[0,"    "]],"start1":1391,"start2":1391,"length1":34,"length2":8}]],"length":6135,"saved":false}
{"ts":1351753114261,"patch":[[{"diffs":[[0,"();\n"],[-1,"\n/**\n * Handles data retrieval and storage.\n * \n * -----------------------------------------------------------------------------\n * Layout\n * -----------------------------------------------------------------------------\n * Model\n *  - initialize()\n *  - sendRequest(type, opts, callback, bind)\n * \n *     Channels\n *      - initialize()\n *      - processChannels()\n *      - update(evid)\n *     Data\n *      - getValues()\n *      - setValues(opts)\n *      - sortBy(col)\n *      - update(obj)\n *     Events\n *      - getEvents()\n *      - getSiteId()\n *      - processEvents(json)\n *      - update(obj)\n */\n(function (global) {\n    'use strict';\n    \n\tvar Model = global.Model = (function () {\n\t\tvar settings = {\n\t\t\trequestUrl: 'get.php'\n\t\t};\n\n\t\treturn {\n\t\t\tinitialize:\t\tfunction () {\n            // Initialize child objects\n                this.Channels = new Channels();\n                this.Data = new Data();\n                this.Events = new Events();\n            },\n            /**\n             * Handle AJAX requests\n             */\n\t\t\tsendRequest:\tfunction (type, opts, callback, bind) {\n\t\t\t\tvar queryString = '';\n\t\t\t\t\n\t\t\t\tfor (var k in opts) {\n\t\t\t\t\tif (opts[k] && opts.hasOwnProperty(k)) {\n\t\t\t\t\t\tqueryString += k + '=' + opts[k] + '&';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tqueryString += 'type=' + type;\n\n\t\t\t}\n\t\t};\n\t}) ();\n\n    var Channels = (function () {\n        var\n            $super = Model,\n            data = {\n                channels: null,\n                evid: -1\n            },\n            queryResult = 'channel-results';\n\n        return new Class({\n            initialize: function () {},\n            getChannels: function () {\n                return data.channels;\n            },\n            processChannels: function (json) {\n\t\t\t\tdata.channels = json;\n                \n//\t\t\t\t$(queryResult).set('text', 'Found ' + json.$meta.rows +\n//                    ' results.');\n\n\t\t\t\tthis.notify();\n            },\n            update: function (evid, siteId) {\n                $super.sendRequest('chn', {\n                    evid: evid,\n                    siteId: siteId\n                }, this.processChannels, this);\n            }\n        });\n    }) ();\n\n\tvar Data = (function () {\n\t\tvar\n\t\t\tvalues\t=\t{};\n\n\t\treturn new Class({\n\t\t\tgetValues: function () {\n\t\t\t\treturn values;\n\t\t\t},\n\t\t\tsetValues: function (opts) {\n\t\t\t\t// Gather site details\n\t\t\t\tvar selOption\t=\topts.site.options[opts.site.selectedIndex];\n\t\t\t\tvalues.site\t\t=\t{\n\t\t\t\t\tname: opts.site.value,\n\t\t\t\t\tlat: parseFloat(selOption.getAttribute('lat')),\n\t\t\t\t\tlon: parseFloat(selOption.getAttribute('lon')),\n\n\t\t\t\t\ttoString: function () {\n\t\t\t\t\t\treturn this.name;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Set default if no value availible\n\t\t\t\tvalues.maxMag =\topts.maxMag ? opts.maxMag : 9;\n\t\t\t\tvalues.minMag = opts.minMag ? opts.minMag : 0;\n\t\t\t\tvalues.radius = opts.radius ? opts.radius : 0;\n\n\t\t\t\t// Set if availible\n\t\t\t\topts.eDate  &&  (values.eDate = opts.eDate);\n\t\t\t\topts.sDate  &&  (values.sDate = opts.sDate);\n\n\t\t\t\tvalues.page\t\t\t=\topts.page;\n\t\t\t\tvalues.itemsPerPage\t=\topts.itemsPerPage;\n\n\t\t\t\tthis.notify();\n\t\t\t},\n\t\t\tsortBy: function (col) {\n\t\t\t\tif (values.sortBy === col) { // Toggle asc/desc if same sortCol\n\t\t\t\t\tvalues.desc = (values.desc + 1) % 2;\n\t\t\t\t} else {\n\t\t\t\t\tvalues.sortBy = col;\n\t\t\t\t\tvalues.desc = 0;\n\t\t\t\t}\n                \n\t\t\t\tvalues.page = 0;\n\t\t\t\tthis.notify();\n\t\t\t},\n\t\t\t// Receives from: Controller\n\t\t\tupdate: function (obj) {\n\t\t\t\tthis.setValues(obj.getInput());\n\t\t\t}\n\t\t});\n\t}) ();\n\n\tvar Events = (function () {\n\t\tvar\n\t\t\t$super\t\t=\tModel,\n\t\t\tevents\t\t=\t[],\n            meta        =   {},\n\t\t\tqueryResult\t=\t'query-result';\n\n\t\treturn new Class({\n\t\t\tgetEvents: function () {\n\t\t\t\treturn events;\n\t\t\t},\n            getSiteId: function () {\n                return meta.siteId;\n            },\n\t\t\tprocessEvents: function (json) {\n\t\t\t\tevents  =   json.$data;\n                meta    =   json.$meta;\n\t\t\t\tglobal.Controller.TableCtrls.setMaxPages(json.$meta.totalPages);\n\t\t\t\t$(queryResult).set('text', 'Found ' + json.$meta.rows +\n                    ' results.');\n\n\t\t\t\tthis.notify();\n\t\t\t},\n\t\t\tupdate: function (obj) {\n\t\t\t\t$super.sendRequest('evt', obj.getValues(),\n                    this.processEvents, this);\n\t\t\t}\n\t\t});\n\t}) ();\n\n}) (this);\n"]],"start1":1959,"start2":1959,"length1":4176,"length2":4}]],"length":1963,"saved":false}
{"ts":1351754246723,"patch":[[{"diffs":[[0,"(options) {\n"],[1,"            this._meta = {};\n"],[0,"            "]],"start1":370,"start2":370,"length1":24,"length2":53},{"diffs":[[0,"    "],[-1,"if (json._data) {\n    "],[1,"this._meta      =   json._meta;\n"],[0,"    "]],"start1":834,"start2":834,"length1":30,"length2":40},{"diffs":[[0,"_models "],[-1,"="],[1,"   =  "],[0," json._d"]],"start1":887,"start2":887,"length1":17,"length2":22},{"diffs":[[0,"._data;\n"],[-1,"            }\n"],[0,"        "]],"start1":906,"start2":906,"length1":30,"length2":16}]],"length":1993,"saved":false}
{"ts":1351754254228,"patch":[[{"diffs":[[0,"json._data;\n"],[1,"            \n"],[0,"            "]],"start1":902,"start2":902,"length1":24,"length2":37}]],"length":2006,"saved":false}
{"ts":1351754290506,"patch":[[{"diffs":[[0,"ng);\n        },\n"],[1,"        getMeta: function () {\n            return this._meta;\n        },\n"],[0,"        toArray:"]],"start1":1335,"start2":1335,"length1":32,"length2":105}]],"length":2079,"saved":false}
{"ts":1351754375722,"patch":[[{"diffs":[[0,"{};\n\n(function ("],[1,"global"],[0,") {\n    var Coll"]],"start1":82,"start2":82,"length1":32,"length2":38},{"diffs":[[0,") {\n            "],[1,"global."],[0,"PubSub.publish('"]],"start1":1573,"start2":1573,"length1":32,"length2":39},{"diffs":[[0,"ventsUpdated');\n"],[-1,""],[0,"        },\n     "]],"start1":1613,"start2":1613,"length1":32,"length2":32},{"diffs":[[0,") {\n            "],[1,"global."],[0,"PubSub.publish('"]],"start1":1765,"start2":1765,"length1":32,"length2":39},{"diffs":[[0,"        "],[1,"global."],[0,"PubSub.p"]],"start1":1970,"start2":1970,"length1":16,"length2":23},{"diffs":[[0,"ts;\n"],[-1,""],[0,"}) ("],[1,"this"],[0,");\n"]],"start1":2095,"start2":2095,"length1":11,"length2":15}]],"length":2110,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351885006744,"patch":[[{"diffs":[[0,"var app "],[-1,"="],[1,"    =  "],[0," app || "]],"start1":65,"start2":65,"length1":17,"length2":23},{"diffs":[[0,"pp || {}"],[1,",\n    PubSub  =   window.PubSub"],[0,";\n\n(func"]],"start1":82,"start2":82,"length1":16,"length2":47},{"diffs":[[0,") {\n            "],[-1,"global."],[0,"PubSub.publish('"]],"start1":1610,"start2":1610,"length1":39,"length2":32},{"diffs":[[0,"ventsUpdated');\n"],[1,""],[0,"        },\n     "]],"start1":1643,"start2":1643,"length1":32,"length2":32},{"diffs":[[0,") {\n            "],[-1,"global."],[0,"PubSub.publish('"]],"start1":1795,"start2":1795,"length1":39,"length2":32},{"diffs":[[0,"    "],[-1,"global."],[0,"PubS"]],"start1":1997,"start2":1997,"length1":15,"length2":8},{"diffs":[[0,"ts;\n}) ("],[-1,"this"],[1,"window"],[0,");\n"]],"start1":2111,"start2":2111,"length1":15,"length2":17}]],"length":2128,"saved":false}
{"ts":1351885110666,"patch":[[{"diffs":[[0,"on ("],[-1,"global"],[0,") {\n"]],"start1":131,"start2":131,"length1":14,"length2":8},{"diffs":[[0,"ts;\n}) ("],[-1,"window"],[0,");\n"]],"start1":2105,"start2":2105,"length1":17,"length2":11}]],"length":2116,"saved":false}
{"ts":1351885115025,"patch":[[{"diffs":[[0,"Events;\n"],[1,"    \n"],[0,"}) ();\n"]],"start1":2101,"start2":2101,"length1":15,"length2":20}]],"length":2121,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351885529883,"patch":[[{"diffs":[[0,"=   "],[-1,"app ||"],[1,"window.app || (window.app ="],[0," {}"],[1,")"],[0,",\n  "]],"start1":77,"start2":77,"length1":17,"length2":39}]],"length":2143,"saved":false}
{"ts":1351885562085,"patch":[[{"diffs":[[0," */\n/*js"],[-1,"h"],[1,"l"],[0,"int moot"]],"start1":35,"start2":35,"length1":17,"length2":17}]],"length":2143,"saved":false}
{"ts":1351885763391,"patch":[[{"diffs":[[0,"ubSub;\n\n"],[1,"/**\n * Handles user input\n * \n * -----------------------------------------------------------------------------\n * Layout\n * -----------------------------------------------------------------------------\n * Model\n */\n"],[0,"(functio"]],"start1":138,"start2":138,"length1":16,"length2":231}]],"length":2358,"saved":false}
{"ts":1351885780762,"patch":[[{"diffs":[[0,"les "],[-1,"user input"],[1,"application data"],[0,"\n * "]],"start1":157,"start2":157,"length1":18,"length2":24}]],"length":2364,"saved":false}
